generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Document {
  id          Int      @id @default(autoincrement())
  title       String
  content     String
  category    String
  status      String   @default("Draft")
  size        String   @default("0 KB")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  versions    DocumentVersion[]
  attachments Attachment[]
  
  @@map("documents")
}

model DocumentVersion {
  id          Int      @id @default(autoincrement())
  documentId  Int
  content     String
  version     String
  changes     String
  createdBy   String
  createdAt   DateTime @default(now())
  
  document    Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  
  @@map("document_versions")
}

model Template {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  content     String
  category    String
  icon        String
  createdAt   DateTime @default(now())
  
  @@map("templates")
}

model ChatHistory {
  id        Int      @id @default(autoincrement())
  message   String
  role      String
  createdAt DateTime @default(now())
  
  @@map("chat_history")
}

model Attachment {
  id          Int      @id @default(autoincrement())
  documentId  Int
  filename    String
  originalName String
  mimeType    String
  size        Int
  path        String
  createdAt   DateTime @default(now())
  
  document    Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  
  @@map("attachments")
}